# Server Configuration
PORT=80
# HOST=localhost
LOG_LEVEL=info

# Multi-Tenancy Configuration
# Base subdomain for system/default tenant (extracted from hostname)
# This value is auto-generated by deploy.sh from DEFAULT_TENANT_SUBDOMAIN config
# Example: For hms.yourdomain.com, this will be 'hms'
# For hospital1-hms.yourdomain.com, subdomain will be 'hospital1-hms'
BASE_SUBDOMAIN=hms

# Database Configuration (MySQL) - Password auto-generated by deploy.sh
DB_HOST=mysql
SOURCE_DB_NAME=nxt-hospital
DB_USERNAME=nxt_user
DB_PASSWORD=REPLACE_WITH_SECURE_PASSWORD
DB_CONNECTION_LIMIT=10
DB_MULTIPLE_STATEMENTS=true

# ====================================================================================
# FBR INTEGRATION REMOVED - NOW PER-TENANT FROM DATABASE
# ====================================================================================
# FBR Tax Integration (Pakistan) is now configured per-tenant via:
# Admin Panel → FBR Management → Configure FBR Settings
# 
# Each tenant configures their own:
# - Environment (Production/Sandbox)
# - POS ID (Point of Sale ID from FBR)
# - API Token (Authentication token from FBR)
# - Timeout and retry settings
# ====================================================================================

# ====================================================================================
# EMAIL CONFIGURATION REMOVED - NOW PER-TENANT FROM DATABASE
# ====================================================================================
# Email configurations (EMAIL_USER, EMAIL_PASSWORD, etc.) have been moved to the
# nxt_tenant_config table and MUST be configured via:
# Admin Panel → System → Tenant Configuration → Email Settings
#
# This ensures true multi-tenant isolation with no shared email credentials.
# Each tenant configures their own SMTP settings (Gmail, SendGrid, etc.)
# ====================================================================================

# JWT Configuration (auto-generated by deploy.sh - 32-byte hex)
JWT_SECRET=REPLACE_WITH_SECURE_RANDOM_32_BYTE_HEX_STRING

# File Storage Configuration
# Use container volume mount path for image storage (tenant-isolated folders will be created under this path)
# Example on Docker: /usr/share/nginx/html/images/<tenant_id>/<category>/<file>
IMAGE_STORAGE_PATH=/usr/share/nginx/html/images
# Public URL used to construct file URLs returned by the API. Do NOT include a trailing slash.
FILE_SERVER_URL=/images

# ====================================================================================
# WEBHOOK CONFIGURATION REMOVED - NOW PER-TENANT FROM DATABASE
# ====================================================================================
# Webhook URLs (Google Chat, Slack, etc.) moved to nxt_tenant_config.
# Configure via: Admin Panel → System → Tenant Configuration → Webhook Settings
# ====================================================================================

# URL Configuration (Internal Docker Service Names)
CUSTOMER_PORTAL_URL=/assets/print
BACKEND_URL=/api-server
PATIENT_PORTAL_URL=/portal

# CORS Configuration (auto-generated by deploy.sh)
# Includes deployment domain (http/https), wildcards for multi-tenant subdomains, and local development
# Example result: ["http://hms.yourdomain.com","https://hms.yourdomain.com","http://localhost","*.localhost","*.local"]
ALLOWED_ORIGINS=["http://localhost","https://localhost","*.localhost","*.local"]

# ====================================================================================
# DATABASE BACKUP CONFIGURATION REMOVED - NOW PER-TENANT FROM DATABASE
# ====================================================================================
# Backup table selection moved to nxt_tenant_config.
# Configure via: Admin Panel → System → Tenant Configuration → Backup Settings
# Each tenant can specify which tables to include in automated backups, retention
# days, and whether backup is enabled.
# 
# Default configuration includes: nxt_appointment, nxt_slip, nxt_bill, 
# nxt_lab_invoice, nxt_lab_report, nxt_patient, recentactivity
# ====================================================================================

# ====================================================================================
# BUSINESS RULES REMOVED - NOW PER-TENANT FROM DATABASE
# ====================================================================================
# Leave balance and reception share configurations moved to nxt_tenant_config.
# Configure via: Admin Panel → System → Tenant Configuration → Business Rules
# ====================================================================================

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_MAX_RETRIES=3
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=10000


# URL Configuration
URL_EXPIRATION_MS=900000
DEFAULT_PRINT_LAYOUT=a4

# ====================================================================================
# TENANT-SPECIFIC CONFIGURATIONS REMOVED
# ====================================================================================
# The following are now configured per-tenant via Admin Panel → Tenant Configuration:
# - PATIENT_DEFAULT_PASSWORD (Business Rules)
# - ENABLE_WHATSAPP, MSGPK_WHATSAPP_* (WhatsApp Settings)
# - RECEPTION_SHARE (Business Rules)
# - OPENAI_* (OpenAI Settings)
# - WEBHOOK_URL (Webhook Settings)
# - SCHED_*_CRON (Scheduler Settings)
# - DEFAULT_TIMEZONE (Locale Settings)
# ====================================================================================

# ====================================================================================
# WHATSAPP CONFIGURATION REMOVED - NOW PER-TENANT FROM DATABASE
# ====================================================================================
# WhatsApp configurations (API_URL, API_KEY, retry settings) moved to nxt_tenant_config.
# Configure via: Admin Panel → System → Tenant Configuration → WhatsApp Settings
# Each tenant configures their own WhatsApp API credentials for true isolation.
# ====================================================================================

# ====================================================================================
# OPENAI CONFIGURATION REMOVED - NOW PER-TENANT FROM DATABASE
# ====================================================================================
# OpenAI configurations (API_KEY, MODEL, tokens) moved to nxt_tenant_config.
# Configure via: Admin Panel → System → Tenant Configuration → OpenAI Settings
# ====================================================================================

# ====================================================================================
# SCHEDULER CONFIGURATION REMOVED - NOW PER-TENANT FROM DATABASE
# ====================================================================================
# Scheduler cron expressions moved to nxt_tenant_config for per-tenant scheduling.
# Configure via: Admin Panel → System → Tenant Configuration → Scheduler Settings
# ====================================================================================

# ====================================================================================
# LOCALE CONFIGURATION REMOVED - NOW PER-TENANT FROM DATABASE
# ====================================================================================
# Timezone, currency, date format moved to nxt_tenant_config.
# Configure via: Admin Panel → System → Tenant Configuration → Locale Settings
# ====================================================================================

# Segment Configuration
# Whether workers should fallback to tenant-scoped patient list when SegmentService fails
ENABLE_SEGMENT_FALLBACK=true

# Whether to return temporary password upon user creation
RETURN_TEMP_PASSWORD=true