# Server Configuration
PORT=80
# HOST=localhost
LOG_LEVEL=info

# Multi-Tenancy Configuration
# Base subdomain for system/default tenant (extracted from hostname)
# This value is auto-generated by deploy.sh from DEFAULT_TENANT_SUBDOMAIN config
# Example: For hms.yourdomain.com, this will be 'hms'
# For hospital1-hms.yourdomain.com, subdomain will be 'hospital1-hms'
BASE_SUBDOMAIN=hms

# Database Configuration (MySQL) - Password auto-generated by deploy.sh
DB_HOST=mysql
SOURCE_DB_NAME=nxt-hospital
DB_USERNAME=nxt_user
DB_PASSWORD=REPLACE_WITH_SECURE_PASSWORD
DB_CONNECTION_LIMIT=10
DB_MULTIPLE_STATEMENTS=true

# FBR Integration Configuration
# System-level toggle to enable/disable FBR integration entirely
FBR_INTEGRATION_ENABLED=true
# FBR API Endpoints (fixed URLs - do not change)
FBR_API_URL_PRODUCTION=https://api.fbr.gov.pk/v1/pos/invoice
FBR_API_URL_SANDBOX=https://api.fbr.gov.pk/v1/pos/sandbox/invoice
# FBR System Settings (fallback values)
FBR_TIMEOUT_MS=30000
FBR_RETRY_ATTEMPTS=3
# NOTE: Hospital-specific credentials (POS_ID, API_TOKEN) are configured via FBR Management UI
# This ensures secure, per-hospital configuration management

# Email Configuration (auto-generated by deploy.sh)
EMAIL_USER=noreply@yourdomain.com
EMAIL_PASSWORD=your-smtp-app-password
EMAIL_IMAGE_PATH=https://yourdomain.com/images/logo.png
EMAIL_RECIPIENTS=["admin@yourdomain.com"]

# JWT Configuration (auto-generated by deploy.sh - 32-byte hex)
JWT_SECRET=REPLACE_WITH_SECURE_RANDOM_32_BYTE_HEX_STRING

# File Storage Configuration
# Use container volume mount path for image storage (tenant-isolated folders will be created under this path)
# Example on Docker: /usr/share/nginx/html/images/<tenant_id>/<category>/<file>
IMAGE_STORAGE_PATH=/usr/share/nginx/html/images
# Public URL used to construct file URLs returned by the API. Do NOT include a trailing slash.
FILE_SERVER_URL=/images

# Webhook Configuration (optional - for Google Chat notifications)
WEBHOOK_URL=

# URL Configuration (Internal Docker Service Names)
CUSTOMER_PORTAL_URL=/assets/print
BACKEND_URL=/api-server
PATIENT_PORTAL_URL=/portal

# CORS Configuration (auto-generated by deploy.sh)
# Includes deployment domain (http/https), wildcards for multi-tenant subdomains, and local development
# Example result: ["http://hms.yourdomain.com","https://hms.yourdomain.com","http://localhost","*.localhost","*.local"]
ALLOWED_ORIGINS=["http://localhost","https://localhost","*.localhost","*.local"]

# Database Backup Configuration
BACKUP_TABLES=["nxt_appointment","nxt_slip","nxt_bill","nxt_lab_invoice","nxt_lab_report","nxt_patient","recentactivity"]

# Leave Balance Configuration
LEAVEBALANCE={"sick":8,"earn":16,"annual":5,"compensation":0}

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_MAX_RETRIES=3
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=10000


# URL Configuration
URL_EXPIRATION_MS=900000
DEFAULT_PRINT_LAYOUT=a4
PATIENT_DEFAULT_PASSWORD=NxtHospital123

# WhatsApp Configuration (optional - configured via deployment-config)
ENABLE_WHATSAPP=false
MSGPK_WHATSAPP_API_URL=https://msgpk.com/api/send.php
MSGPK_WHATSAPP_API_KEY=
MSGPK_WHATSAPP_GROUP_API_URL=https://msgpk.com/apps/check_group.php
MSGPK_WHATSAPP_CHECK_API_URL=https://msgpk.com/api/whatsapp_numbers.php
WHATSAPP_MAX_RETRIES=3
WHATSAPP_RETRY_DELAY_MS=1000
WHATSAPP_RATE_LIMIT_DELAY_MS=100
WHATSAPP_IMAGE_URL=https://yourdomain.com/images/logo.jpg

# Reception Share Configuration
RECEPTION_SHARE={"ENABLED":true,"PERCENTAGE":1.25}

# OpenAI Configuration (optional - for AI features)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4-turbo
MAX_TOKENS=2500
TEMPERATURE=0.5
TOP_P=1.0

# Segment Configuration
# Whether workers should fallback to tenant-scoped patient list when SegmentService fails
ENABLE_SEGMENT_FALLBACK=true
# Campaign Configuration
DEFAULT_TIMEZONE=Asia/Karachi

# Whether to return temporary password upon user creation
RETURN_TEMP_PASSWORD=true

# Scheduler Configuration
SCHED_DISABLE=false
SCHED_OPD_DAILY_CRON="0 6 * * *"
SCHED_OPD_WEEKLY_CRON="0 7 * * 1"
SCHED_OPD_BIMONTHLY_CRON="0 7 1,16 * *"
SCHED_OPD_MONTHLY_CRON="0 8 1 * *"
SCHED_DB_BACKUP_CRON="0 2 * * 0"