# ========================================
# Subscription & Payment Gateway Configuration
# Add these variables to nxt-hospital-skeleton-project/hms-backend.env
# ========================================

# ==================== JazzCash Payment Gateway ====================
# Sign up at: https://payments.jazzcash.com.pk/SandboxRegistration/
# Merchant Portal: https://sandbox.jazzcash.com.pk/ (sandbox) or https://payments.jazzcash.com.pk/ (production)

JAZZCASH_MERCHANT_ID=MC12345                    # Your JazzCash Merchant ID
JAZZCASH_PASSWORD=your_merchant_password         # Merchant login password
JAZZCASH_INTEGRITY_SALT=your_integrity_salt      # Integration salt/key from merchant portal
JAZZCASH_SANDBOX=true                            # Set to false for production
JAZZCASH_RETURN_URL=https://yourdomain.com/api-server/payment/callback/jazzcash
JAZZCASH_VERSION=1.1                             # API version (default 1.1)
JAZZCASH_CURRENCY=PKR                            # Currency code
JAZZCASH_LANGUAGE=EN                             # EN or UR
JAZZCASH_EXPIRY_HOURS=2                          # Payment link expiry (in hours)

# ==================== EasyPaisa Payment Gateway ====================
# Contact EasyPaisa for merchant account: https://easypaisa.com.pk/
# Merchant Support: merchant.support@easypaisa.com.pk

EASYPAISA_STORE_ID=12345                         # Your EasyPaisa Store ID
EASYPAISA_HASH_KEY=your_hash_key                 # Integration hash key
EASYPAISA_SANDBOX=true                           # Set to false for production
EASYPAISA_RETURN_URL=https://yourdomain.com/api-server/payment/callback/easypaisa
EASYPAISA_CALLBACK_URL=https://yourdomain.com/api-server/payment/callback/easypaisa
EASYPAISA_CANCEL_URL=https://yourdomain.com/payment-failed.html
EASYPAISA_EXPIRY_HOURS=2                         # Token expiry (in hours)

# ==================== Bank Transfer Details ====================
# Display these details to customers who choose bank transfer

BANK_NAME=Habib Bank Limited (HBL)               # Bank name
BANK_ACCOUNT_NUMBER=1234567890123               # Account number
BANK_ACCOUNT_TITLE=Your Company Name Pvt Ltd    # Account title
BANK_BRANCH_CODE=0123                            # Branch code
BANK_IBAN=PK12HABB0000001234567890              # IBAN number
BANK_SWIFT_CODE=HABBPKKA                         # SWIFT code (for international)
BANK_BRANCH_ADDRESS=Main Branch, Karachi         # Branch address

# ==================== Payment Configuration ====================
PAYMENT_CURRENCY=PKR                             # Default currency
PAYMENT_SUCCESS_URL=https://yourdomain.com/payment-success.html
PAYMENT_CANCEL_URL=https://yourdomain.com/payment-failed.html
PAYMENT_ERROR_URL=https://yourdomain.com/payment-error.html
PAYMENT_WEBHOOK_SECRET=your_random_secret_key    # For webhook signature verification

# ==================== Subscription Configuration ====================
TRIAL_PERIOD_DAYS=15                             # Free trial duration (default from DB: 15 days)
GRACE_PERIOD_DAYS=7                              # Grace period after expiry before suspension
AUTO_RENEWAL_ENABLED=true                        # Enable automatic subscription renewal
SUBSCRIPTION_REMINDER_DAYS=7,3,1                 # Send renewal reminders N days before expiry

# ==================== License Key Configuration ====================
LICENSE_KEY_PREFIX=NXT-HMS                       # Prefix for generated license keys
LICENSE_KEY_LENGTH=32                            # Length of random key (default 32 bytes)

# ==================== Resource Limits (Override Plan Defaults) ====================
# NOTE: These override plan limits globally. Usually not needed.
# MAX_USERS_PER_TENANT=100
# MAX_PATIENTS_PER_TENANT=10000
# MAX_STORAGE_MB_PER_TENANT=5120
# MAX_API_CALLS_PER_DAY=10000

# ==================== Notification Settings ====================
SUBSCRIPTION_NOTIFICATION_EMAIL=admin@yourdomain.com  # Receive new signup notifications
PAYMENT_NOTIFICATION_EMAIL=finance@yourdomain.com     # Receive payment notifications

# ==================== Webhook URLs (Optional) ====================
# If you want to receive webhooks for subscription events
SUBSCRIPTION_WEBHOOK_URL=https://yourapp.com/webhooks/subscription
PAYMENT_WEBHOOK_URL=https://yourapp.com/webhooks/payment

# ==================== Security ====================
PAYMENT_ENCRYPTION_KEY=your_32_char_encryption_key_here  # For encrypting sensitive payment data
ALLOWED_PAYMENT_ORIGINS=https://yourdomain.com,https://www.yourdomain.com  # CORS for payment pages

# ==================== Development/Testing ====================
# Remove or comment out in production
TEST_MODE=false                                  # Enable test mode (skip actual payment processing)
SKIP_PAYMENT_VERIFICATION=false                  # Skip signature verification (DANGEROUS - dev only)

# ========================================
# Integration Testing Credentials (Sandbox)
# ========================================

# JazzCash Sandbox Test Credentials:
# URL: https://sandbox.jazzcash.com.pk/CustomerPortal
# Test Card: 0000-0000-0000-0000
# Test Expiry: Any future date
# Test CVV: Any 3 digits

# EasyPaisa Sandbox Test Credentials:
# Contact EasyPaisa support for test credentials

# ========================================
# Production Deployment Notes
# ========================================

# 1. Change all *_SANDBOX variables to false
# 2. Replace test credentials with production credentials
# 3. Update all URLs to production domain (no localhost)
# 4. Set TEST_MODE=false and SKIP_PAYMENT_VERIFICATION=false
# 5. Ensure HTTPS is enabled for all payment URLs
# 6. Configure webhook URLs to be publicly accessible
# 7. Keep PAYMENT_ENCRYPTION_KEY and webhook secrets secure (use secrets manager)
# 8. Set up monitoring and alerts for failed payments
# 9. Configure email notifications for subscription events
# 10. Test payment flow end-to-end before going live

# ========================================
# Example Production Configuration
# ========================================

# JAZZCASH_MERCHANT_ID=MC56789
# JAZZCASH_PASSWORD=SecurePassword123!
# JAZZCASH_INTEGRITY_SALT=a1b2c3d4e5f6g7h8i9j0
# JAZZCASH_SANDBOX=false
# JAZZCASH_RETURN_URL=https://hms.yourdomain.com/api-server/payment/callback/jazzcash

# EASYPAISA_STORE_ID=67890
# EASYPAISA_HASH_KEY=z9y8x7w6v5u4t3s2r1q0
# EASYPAISA_SANDBOX=false
# EASYPAISA_RETURN_URL=https://hms.yourdomain.com/api-server/payment/callback/easypaisa

# PAYMENT_SUCCESS_URL=https://hms.yourdomain.com/payment-success.html
# PAYMENT_CANCEL_URL=https://hms.yourdomain.com/payment-failed.html
# TEST_MODE=false
# SKIP_PAYMENT_VERIFICATION=false
